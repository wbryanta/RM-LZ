{
  "meta": {
    "description": "LandingZone development tasks",
    "canonical_path": "./tasks.json",
    "legacy_source": "projects/backlog/tasks.json",
    "migrated_at": "2025-11-09T00:27:35.022825",
    "last_validated": "2025-11-13T11:30:00.000000",
    "notes": [
      "Single source of truth for LandingZone mod work items.",
      "Keep statuses synced with GitHub issues once repo goes public.",
      "Architecture shift (v0.0.3-alpha): Removed WorldSnapshot abstraction. All filters now access game's native cache (Find.World.grid) directly as single source of truth."
    ]
  },
  "completed": [
    {
      "id": "LZ-ARCH-002",
      "title": "Remove WorldSnapshot abstraction - use game cache as single source of truth",
      "status": "completed",
      "completed_at": "2025-11-13",
      "owner": "team",
      "notes": "CRITICAL architecture refactor. Removed WorldSnapshot.cs entirely. All filters now access Find.World.grid directly. Eliminates memory duplication, initialization cost (~150ms), and development confusion. Game's cache has all properties we need instantly available.",
      "deliverables": [
        "Deleted Source/Data/WorldSnapshot.cs ✓",
        "Updated 15+ filters to use Find.World.grid[tileId] directly ✓",
        "Removed WorldSnapshot from GameState, GameStateFactory ✓",
        "Updated FilterService, LandingZoneContext infrastructure ✓",
        "Updated CLAUDE.md to reflect new architecture ✓"
      ],
      "area": "Architecture",
      "impact": "Major simplification. Single source of truth. ~150ms faster init. Clearer code."
    },
    {
      "id": "LZ-FILTER-013",
      "title": "Fix cave filtering bug - remove HasCaveFilter heuristic",
      "status": "completed",
      "completed_at": "2025-11-13",
      "owner": "team",
      "notes": "CRITICAL bug fix. HasCaveFilter used broken heuristic (Mountainous=100% caves, LargeHills=30% random). Caused false positives and 0-result searches. Removed entirely. Caves now only in MapFeatureFilter using actual game Mutators data.",
      "deliverables": [
        "Deleted HasCaveFilter.cs ✓",
        "Removed from FilterService registration ✓",
        "Removed HasCaveImportance from FilterSettings ✓",
        "Removed cave UI from Terrain section ✓",
        "Made Caves prominent in Map Features (appears first) ✓",
        "Updated UI tooltip to clarify 'actual world generation data' ✓"
      ],
      "area": "Filtering",
      "impact": "Cave filtering now 100% accurate using game's actual Mutator data."
    },
    {
      "id": "LZ-FILTER-014",
      "title": "Fix k-of-n architecture bugs in 12 filters",
      "status": "completed",
      "completed_at": "2025-11-11",
      "owner": "team",
      "notes": "Fixed k-of-n bug where filters eliminated Preferred tiles instead of passing them through to scoring phase. Apply() now only filters when importance == Critical.",
      "deliverables": [
        "Fixed: LandmarkFilter, GrazeFilter, SpecificStoneFilter ✓",
        "Fixed: ElevationFilter, AverageTemperatureFilter, MinimumTemperatureFilter ✓",
        "Fixed: MaximumTemperatureFilter, ForageableFoodFilter, StoneCountFilter ✓",
        "Fixed: CoastalLakeFilter, HasCaveFilter, WorldFeatureFilter ✓"
      ],
      "area": "Filtering"
    },
    {
      "id": "LZ-PERF-003",
      "title": "Split TileInfo into Basic and Extended structs",
      "status": "completed",
      "owner": "team",
      "notes": "COMPLETED. Separation achieved via game cache + TileDataCache pattern.",
      "area": "Performance"
    },
    {
      "id": "LZ-PERF-004",
      "title": "Implement TileDataCache for lazy computation",
      "status": "completed",
      "owner": "team",
      "notes": "COMPLETED. TileDataCache computes expensive properties (growing days, stones, grazing) on-demand.",
      "area": "Performance"
    },
    {
      "id": "LZ-PERF-005",
      "title": "Update WorldSnapshot for fast initialization",
      "status": "completed",
      "owner": "team",
      "notes": "COMPLETED and SUPERSEDED. WorldSnapshot removed entirely in favor of game cache.",
      "area": "Performance"
    },
    {
      "id": "LZ-PERF-006",
      "title": "Update FilterService for on-demand data fetching",
      "status": "completed",
      "owner": "team",
      "notes": "COMPLETED. Filters fetch expensive data from TileDataCache only after cheap filters pass.",
      "area": "Performance"
    },
    {
      "id": "LZ-PERF-007",
      "title": "Verify hybrid approach performance improvements",
      "status": "completed",
      "owner": "team",
      "notes": "VALIDATED. World ready instantly. Searches complete in seconds. No UI freezing.",
      "area": "Performance"
    },
    {
      "id": "LZ-INFRA-005",
      "title": "Expand FilterSettings Data Model",
      "status": "completed",
      "owner": "team",
      "notes": "COMPLETED. All filter properties added with importance levels and ranges.",
      "area": "Infrastructure"
    },
    {
      "id": "LZ-FILTER-002",
      "title": "Separate Temperature Filters",
      "status": "completed",
      "owner": "team",
      "notes": "COMPLETED. Average, Minimum, Maximum temperature filters implemented.",
      "area": "Filtering"
    },
    {
      "id": "LZ-FILTER-003",
      "title": "Elevation Filter",
      "status": "completed",
      "owner": "team",
      "notes": "COMPLETED. Elevation range filter using tile.elevation.",
      "area": "Filtering"
    },
    {
      "id": "LZ-FILTER-005",
      "title": "Animals Can Graze Now - Enhance to Tri-State",
      "status": "completed",
      "owner": "team",
      "notes": "COMPLETED. Tri-state filter with importance levels.",
      "area": "Filtering"
    },
    {
      "id": "LZ-FILTER-006",
      "title": "Coastal Lake Filter",
      "status": "completed",
      "owner": "team",
      "notes": "COMPLETED. Separate lake adjacency filter.",
      "area": "Filtering"
    },
    {
      "id": "LZ-FILTER-007",
      "title": "Forageable Food Type Filter",
      "status": "completed",
      "owner": "team",
      "notes": "COMPLETED. Dropdown to select specific forageable food types.",
      "area": "Filtering"
    },
    {
      "id": "LZ-FILTER-008",
      "title": "River Types Multi-Select",
      "status": "completed",
      "owner": "team",
      "notes": "COMPLETED. Individual importance per river type with multi-select UI.",
      "area": "Filtering"
    },
    {
      "id": "LZ-FILTER-009",
      "title": "Road Types Multi-Select",
      "status": "completed",
      "owner": "team",
      "notes": "COMPLETED. Road type filter with individual importance levels.",
      "area": "Filtering"
    },
    {
      "id": "LZ-FILTER-010",
      "title": "Map Features Multi-Select (1.6 Feature)",
      "status": "completed",
      "owner": "team",
      "notes": "COMPLETED. Multi-select for RimWorld 1.6 Mutators (Caves, Ruins, Mountain, etc.). Uses actual game data via reflection.",
      "area": "Filtering"
    },
    {
      "id": "LZ-FILTER-011",
      "title": "Adjacent Biomes Multi-Select (1.6 Feature)",
      "status": "completed",
      "owner": "team",
      "notes": "COMPLETED. Multi-select for requiring specific adjacent biomes.",
      "area": "Filtering"
    },
    {
      "id": "LZ-FILTER-012",
      "title": "Stone Count Filter (Any X Types)",
      "status": "completed",
      "owner": "team",
      "notes": "COMPLETED. Individual importance per stone type with count matching.",
      "area": "Filtering"
    },
    {
      "id": "LZ-UI-014",
      "title": "Add Active Filter Indicators",
      "status": "completed",
      "owner": "team",
      "notes": "COMPLETED. Badge counts on section headers showing active filter count.",
      "area": "UI"
    },
    {
      "id": "LZ-UI-020",
      "title": "Persist Section Expanded/Collapsed State",
      "status": "completed",
      "owner": "team",
      "notes": "COMPLETED. Section states persisted across sessions.",
      "area": "UI"
    },
    {
      "id": "LZ-DATA-001",
      "title": "Design data/state containers",
      "status": "completed",
      "owner": "team",
      "area": "Core Systems"
    },
    {
      "id": "LZ-CODE-001",
      "title": "Implement mod bootstrap + Harmony wiring",
      "status": "completed",
      "owner": "team",
      "area": "Runtime"
    },
    {
      "id": "LZ-INFRA-001",
      "title": "Automate build + assembly copy",
      "status": "completed",
      "owner": "team",
      "area": "Infrastructure"
    },
    {
      "id": "LZ-RESEARCH-002",
      "title": "Define LandingZone roadmap",
      "status": "completed",
      "owner": "team",
      "area": "Planning"
    },
    {
      "id": "LZ-RESEARCH-001",
      "title": "Catalog Prepare Landing features & pain points",
      "status": "completed",
      "owner": "team",
      "area": "Research"
    },
    {
      "id": "LZ-ARCH-001",
      "title": "Draft LandingZone architecture plan",
      "status": "completed",
      "owner": "team",
      "area": "Planning"
    },
    {
      "id": "LZ-PERF-002",
      "title": "Background world evaluation pipeline - scoring phase",
      "status": "completed",
      "owner": "team",
      "area": "Performance"
    },
    {
      "id": "LZ-FILTER-001",
      "title": "Design modular filter/score registry",
      "status": "completed",
      "owner": "team",
      "area": "Filtering"
    },
    {
      "id": "LZ-HIGHLIGHT-001",
      "title": "Implement tile highlighting system",
      "status": "completed",
      "owner": "team",
      "area": "Core Systems"
    }
  ],
  "in_progress": [],
  "blocked": [],
  "todo": [
    {
      "id": "LZ-FILTER-015",
      "title": "Add AnimalDensity filter",
      "status": "todo",
      "owner": "team",
      "notes": "Add filter for tile.AnimalDensity (float 0-6 range) with min/max slider and importance level.",
      "deliverables": [
        "Create Source/Core/Filtering/Filters/AnimalDensityFilter.cs",
        "Add AnimalDensityRange + AnimalDensityImportance to FilterSettings",
        "Add UI slider in Resources section",
        "Test with various animal density ranges"
      ],
      "area": "Filtering",
      "rank": 1,
      "priority": "high"
    },
    {
      "id": "LZ-FILTER-016",
      "title": "Add FishPopulation filter",
      "status": "todo",
      "owner": "team",
      "notes": "Add filter for tile.MaxFishPopulation (int 0-720 range) with minimum threshold and importance level.",
      "deliverables": [
        "Create Source/Core/Filtering/Filters/FishPopulationFilter.cs",
        "Add FishPopulationMin + FishPopulationImportance to FilterSettings",
        "Add UI slider in Resources section",
        "Test with coastal/river tiles"
      ],
      "area": "Filtering",
      "rank": 2,
      "priority": "high"
    },
    {
      "id": "LZ-UI-021",
      "title": "Design and implement Basic/Advanced UI mode toggle",
      "status": "todo",
      "owner": "team",
      "notes": "CRITICAL UX improvement. Split UI into Basic (curated, simple) and Advanced (full power user control) modes. Basic shows most common filters with simplified controls. Advanced shows everything.",
      "deliverables": [
        "Add mode toggle button at top of preferences window",
        "Basic mode: Simple temp range, biome dropdown, quick features (coastal/river/caves yes/no), growing season slider",
        "Advanced mode: All current sections (separate temps, all stones, all features, etc.)",
        "Store mode preference in settings",
        "Mode switch preserves configured values",
        "Update LandingZonePreferencesWindow.cs with conditional rendering"
      ],
      "area": "UI",
      "rank": 3,
      "priority": "critical",
      "notes_extended": "Caves in Basic mode maps to MapFeatureFilter with Caves=Critical. This eliminates confusion about two cave options and makes the correct option (actual game data) easily accessible to casual users."
    },
    {
      "id": "LZ-DOCS-001",
      "title": "Update CLAUDE.md with game cache architecture",
      "status": "todo",
      "owner": "team",
      "notes": "Update project documentation to reflect removal of WorldSnapshot and shift to game cache as single source of truth.",
      "deliverables": [
        "Update architecture section in CLAUDE.md",
        "Remove WorldSnapshot references",
        "Document game cache access pattern (Find.World.grid[id])",
        "Update filter implementation examples",
        "Document TileDataCache for expensive properties only"
      ],
      "area": "Documentation",
      "rank": 4,
      "priority": "high"
    },
    {
      "id": "LZ-DOCS-002",
      "title": "Update filtering architecture doc with actual implementation",
      "status": "todo",
      "owner": "team",
      "notes": "Update docs/filtering-architecture_v0_0_3-alpha.md to reflect current k-of-n fixes, game cache usage, and removed WorldSnapshot.",
      "deliverables": [
        "Update architecture diagrams",
        "Document Apply() vs Score() phases accurately",
        "Remove WorldSnapshot references",
        "Add actual performance metrics from testing",
        "Document cave filtering fix as case study"
      ],
      "area": "Documentation",
      "rank": 5,
      "priority": "medium"
    },
    {
      "id": "LZ-UI-011",
      "title": "Fix Scrollbar Visibility",
      "status": "todo",
      "owner": "team",
      "notes": "Current scrollbar implementation works but could use polish. Low priority given other UX improvements.",
      "area": "UI",
      "rank": 10,
      "priority": "low"
    },
    {
      "id": "LZ-UI-012",
      "title": "Add Search Boxes to Long Lists",
      "status": "todo",
      "owner": "team",
      "notes": "Add searchable list component for Map Features, Adjacent Biomes, etc.",
      "area": "UI",
      "rank": 11,
      "priority": "medium"
    },
    {
      "id": "LZ-UI-013",
      "title": "Add Reset/All/None Buttons",
      "status": "todo",
      "owner": "team",
      "notes": "Create reusable button group component for multi-selects. Most multi-selects already have these via IndividualImportanceContainer.",
      "area": "UI",
      "rank": 12,
      "priority": "low"
    },
    {
      "id": "LZ-UI-015",
      "title": "Improve Section Headers",
      "status": "todo",
      "owner": "team",
      "notes": "Better icons, color-coded backgrounds for sections. Current headers functional but could be prettier.",
      "area": "UI",
      "rank": 13,
      "priority": "low"
    },
    {
      "id": "LZ-UI-016",
      "title": "Add Comprehensive Tooltips",
      "status": "todo",
      "owner": "team",
      "notes": "Most filters have tooltips. This task is about ensuring ALL filters have helpful, consistent tooltips.",
      "area": "UI",
      "rank": 14,
      "priority": "medium"
    },
    {
      "id": "LZ-PRESET-003",
      "title": "Preset Data Model",
      "status": "todo",
      "owner": "team",
      "notes": "Create FilterPreset.cs class with serialization for save/load functionality.",
      "area": "Persistence",
      "rank": 20,
      "priority": "medium"
    },
    {
      "id": "LZ-PRESET-004",
      "title": "Preset Manager Service",
      "status": "todo",
      "owner": "team",
      "notes": "PresetManager to handle save/load/delete operations.",
      "area": "Persistence",
      "rank": 21,
      "priority": "medium",
      "blockedBy": ["LZ-PRESET-003"]
    },
    {
      "id": "LZ-PRESET-005",
      "title": "Built-in Presets",
      "status": "todo",
      "owner": "team",
      "notes": "Create 5-7 default filter presets (Easy Start, Balanced, Challenge, River Valley, Coastal Paradise, Mountain Fortress).",
      "area": "Persistence",
      "rank": 22,
      "priority": "medium",
      "blockedBy": ["LZ-PRESET-004"]
    },
    {
      "id": "LZ-UX-005",
      "title": "'Why No Results?' Diagnostic",
      "status": "todo",
      "owner": "team",
      "notes": "Add diagnostic button when search returns 0 tiles to analyze and suggest filter adjustments.",
      "area": "UX",
      "rank": 30,
      "priority": "high"
    },
    {
      "id": "LZ-UX-006",
      "title": "Keyboard Shortcuts",
      "status": "todo",
      "owner": "team",
      "notes": "Add keyboard shortcuts for common operations (Space, Enter, Ctrl+R, etc.).",
      "area": "UX",
      "rank": 31,
      "priority": "low"
    },
    {
      "id": "LZ-UI-003",
      "title": "Implement WorldLayer for tile highlighting visualization",
      "status": "todo",
      "owner": "team",
      "notes": "Create RimWorld WorldLayer to render highlighted tiles on world map.",
      "area": "UI",
      "rank": 40,
      "priority": "medium"
    },
    {
      "id": "LZ-UX-001",
      "title": "Show Best Sites overlay UI",
      "status": "todo",
      "owner": "team",
      "notes": "Add UI button to activate heatmap-style overlay showing top-scoring tiles.",
      "area": "UI/Visualization",
      "rank": 41,
      "priority": "medium",
      "blockedBy": ["LZ-UI-003"]
    }
  ]
}
